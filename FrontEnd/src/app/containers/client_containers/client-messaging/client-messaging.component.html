
<div class="client_chat_container">
  <div id="chat_sidebar" class="chat_sidebar">
    <div class="chat_sidebar_header">
      
      <div class="chat_sidebar_header_user_info_container">
        <img *ngIf="CurrentUserStateService.getCurrentUser().profile_picture" src={{CurrentUserStateService.getCurrentUser().profile_picture}} class="rounded-circle">
        <i *ngIf="!CurrentUserStateService.getCurrentUser().profile_picture" class="fas fa-user-circle fa-3x"></i>
        <div *ngIf="user" class="own_username ml-2">{{user.username}}</div>
      </div>
      <i class="fas fa-times fa-lg close_sidebar_btn mr-2"></i>
      
    </div>
    <div class="search_for_fan_to_chat_container">
      <input type="text" class="search_for_fan_to_chat mt-1 mb-1" placeholder="Search Here">
    </div>
    
    <div class="chat_sidebar_userlist_container">
      <div *ngFor="let conversation of ChatStateService.conversation_list$ | async" style="height: 10%;width: 100%;">
        <app-chat-sidebar-user-card  [conversation_info] = "conversation"></app-chat-sidebar-user-card>
      </div>
      
      <!-- *ngFor="let conversation of ChatStateService.conversation_list$ | async" -->
      
      <!-- <div class="chat_sidebar_user_card">
        <div class="chat_sidebar_card_avatar">
          <img src="../../../../assets/images/profile_picture.jpeg" class="rounded-circle">
        </div>
        <div class="chat_sidebar_card_body ml-1">
          <div class="chat_sidebar_card_username">User1 Username</div>
          <div class="chat_sidebar_card_last_message">last message was hello Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui veniam facilis quae nulla modi iure laudantium? Similique voluptates est deserunt sit, harum maxime ab in magnam fuga nihil, dignissimos impedit.</div>
        </div>
        <div class="chat_sidebar_card_add_info">
          <div class="last_message_time">9:54 PM</div>
        </div>
      </div>
      <div class="chat_sidebar_user_card">
        <div class="chat_sidebar_card_avatar">
          <img src="../../../../assets/images/profile_picture.jpeg" class="rounded-circle">
        </div>
        <div class="chat_sidebar_card_body ml-1">
          <div class="chat_sidebar_card_username">User1 Username</div>
          <div class="chat_sidebar_card_last_message">last message was hello Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui veniam facilis quae nulla modi iure laudantium? Similique voluptates est deserunt sit, harum maxime ab in magnam fuga nihil, dignissimos impedit.</div>
        </div>
        <div class="chat_sidebar_card_add_info">
          <div class="last_message_time">9:54 PM</div>
        </div>
      </div>
      <div class="chat_sidebar_user_card">
        <div class="chat_sidebar_card_avatar">
          <img src="../../../../assets/images/profile_picture.jpeg" class="rounded-circle">
        </div>
        <div class="chat_sidebar_card_body ml-1">
          <div class="chat_sidebar_card_username">User1 Username</div>
          <div class="chat_sidebar_card_last_message">last message was hello Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui veniam facilis quae nulla modi iure laudantium? Similique voluptates est deserunt sit, harum maxime ab in magnam fuga nihil, dignissimos impedit.</div>
        </div>
        <div class="chat_sidebar_card_add_info">
          <div class="last_message_time">9:54 PM</div>
        </div>
      </div>
      <div class="chat_sidebar_user_card">
        <div class="chat_sidebar_card_avatar">
          <img src="../../../../assets/images/profile_picture.jpeg" class="rounded-circle">
        </div>
        <div class="chat_sidebar_card_body ml-1">
          <div class="chat_sidebar_card_username">User1 Username</div>
          <div class="chat_sidebar_card_last_message">last message was hello Lorem ipsum dolor sit amet consectetur adipisicing elit. Qui veniam facilis quae nulla modi iure laudantium? Similique voluptates est deserunt sit, harum maxime ab in magnam fuga nihil, dignissimos impedit.</div>
        </div>
        <div class="chat_sidebar_card_add_info">
          <div class="last_message_time">9:54 PM</div>
        </div>
      </div> -->
    </div>
  </div>
  <div class="chat_main_container">
    
    <div class="chat_main_container_header">
      <i class="fas fa-bars hamberger mr-4"></i>
      <!-- <img *ngIf="(ChatStateService.chattting_friend$ | async).length != 0" src="{{(ChatStateService.chattting_friend$ | async).avatar}}" class="rounded-circle"> -->
      <img *ngIf="(ChatStateService.chattting_friend$ | async).length != 0 && (ChatStateService.chattting_friend$ | async).profile_picture" src="{{(ChatStateService.chattting_friend$ | async).profile_picture}}" class="rounded-circle">
      <i *ngIf="(ChatStateService.chattting_friend$ | async).length != 0 && (ChatStateService.chattting_friend$ | async).profile_picture==null" class="fas fa-user-circle fa-3x"></i>
      <!-- <img *ngIf="(ChatStateService.chattting_friend$ | async).length != 0" src={{GetUserProfilePicService.getProfilePicUrlFromUsername((ChatStateService.chattting_friend$ | async).username)}} class="rounded-circle"> -->
      <div class="user_to_chat_with_username ml-1">{{(ChatStateService.chattting_friend$ | async).username}}</div>
    </div>
    <div class="chat_main_container_body" #scrollMe>
      <div *ngFor="let message of ChatStateService.messages$ | async">

        <div *ngIf="message.sender==user._id" class="message_sent_container">
          <div  class="message_sent">
            <div class="message_sent_add_info">
              <div></div>
              <div class="message_sent_time">{{ message.createdAt | myDateAgoPipe}}</div>
            </div>
            <div class="message_body">
              {{message.message_text}}
            </div>
          </div>
        </div>
        <div *ngIf="message.sender!=user._id" class="message_received_container">
          <div class="message_received">
            <div class="message_received_add_info">
              <div class="message_received_username mr-2">{{(ChatStateService.chattting_friend$ | async).username}}</div>
              <div class="message_received_time">{{ message.createdAt | myDateAgoPipe}}</div>
            </div>
            <div class="message_body">
              {{message.message_text}}
            </div> 
          </div>
        </div>
        
        
        
      </div>
      
      
    </div>
    <div *ngIf="ChatStateService.conversation$ | async" class="chat_main_container_footer">
      <div class="chat_container_footer_attachment_btn_container">
        <!-- <img src="../../../../assets/icons/attachment.svg"> -->
      </div>
      <div class="chat_container_footer_input_area">
        <input #message_to_be_sent_text class="chat_message_input_text" placeholder="Type Your Message here ...">
      </div>
      <div class="chat_container_footer_send_btn_container">
        <div class="btn rounded-circle message_send_btn" *ngIf="(ChatStateService.conversation$ | async).length != 0" (click)="send_message(message_to_be_sent_text)">
          <i class="fas fa-paper-plane fa-lg" style="color: white;"></i>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- <div class="container-fluid h-50">
    <div class="row justify-content-center h-100">
      <div class="col-md-4 col-xl-3 chat"><div class="card mb-sm-3 mb-md-0 contacts_card">
        <div class="card-header">
          <div class="input-group">
            <input type="text" placeholder="Search..." name="" class="form-control search">
            <div class="input-group-prepend">
              <span class="input-group-text search_btn"><i class="fas fa-search"></i></span>
            </div>
          </div>
        </div>
        <div class="card-body contacts_body">
          <ul class="contacts">
          <li class="active">
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon"></span>
              </div>
              <div class="user_info">
                <span>jassa</span>
                <p>Kalid is online</p>
              </div>
            </div>
          </li>
          <li>
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon offline"></span>
              </div>
              <div class="user_info">
                <span>jassa</span>
                <p>Taherah left 7 mins ago</p>
              </div>
            </div>
          </li>
          <li>
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon"></span>
              </div>
              <div class="user_info">
                <span>jassa Mann</span>
                <p>Sami is online</p>
              </div>
            </div>
          </li>
          <li>
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon offline"></span>
              </div>
              <div class="user_info">
                <span>jassa Mann</span>
                <p>Nargis left 30 mins ago</p>
              </div>
            </div>
          </li>
          <li>
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon offline"></span>
              </div>
              <div class="user_info">
                <span>jassa Mann</span>
                <p>Rashid left 50 mins ago</p>
              </div>
            </div>
          </li>
        </ul>
        </div>
        <div class="card-footer"></div>
      </div></div>
      <div class="col-md-8 col-xl-6 chat">
        <div class="card">
          <div class="card-header msg_head">
            <div class="d-flex bd-highlight">
              <div class="img_cont">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img">
                <span class="online_icon"></span>
              </div>
              <div class="user_info">
                <span>Chat with jassa</span>
                <p>1767 Messages</p>
              </div>
              <div class="video_cam">
                <span><i class="fas fa-video"></i></span>
                <span><i class="fas fa-phone"></i></span>
              </div>
            </div>
            <span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
            <div class="action_menu">
              <ul>
                <li><i class="fas fa-user-circle"></i> View profile</li>
                <li><i class="fas fa-users"></i> Add to close friends</li>
                <li><i class="fas fa-plus"></i> Add to group</li>
                <li><i class="fas fa-ban"></i> Block</li>
              </ul>
            </div>
          </div>
          <div class="card-body msg_card_body">
            <div class="d-flex justify-content-start mb-4">
              <div class="img_cont_msg">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
              <div class="msg_cotainer">
                Hi, how are you samim?
                <span class="msg_time">8:40 AM, Today</span>
              </div>
            </div>
            <div class="d-flex justify-content-end mb-4">
              <div class="msg_cotainer_send">
                Hi jassa i am good tnx how about you?
                <span class="msg_time_send">8:55 AM, Today</span>
              </div>
              <div class="img_cont_msg">
            <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
            </div>
            <div class="d-flex justify-content-start mb-4">
              <div class="img_cont_msg">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
              <div class="msg_cotainer">
                I am good too, thank you for your chat template
                <span class="msg_time">9:00 AM, Today</span>
              </div>
            </div>
            <div class="d-flex justify-content-end mb-4">
              <div class="msg_cotainer_send">
                You are welcome
                <span class="msg_time_send">9:05 AM, Today</span>
              </div>
              <div class="img_cont_msg">
            <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
            </div>
            <div class="d-flex justify-content-start mb-4">
              <div class="img_cont_msg">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
              <div class="msg_cotainer">
                I am looking for your next templates
                <span class="msg_time">9:07 AM, Today</span>
              </div>
            </div>
            <div class="d-flex justify-content-end mb-4">
              <div class="msg_cotainer_send">
                Ok, thank you have a good day
                <span class="msg_time_send">9:10 AM, Today</span>
              </div>
              <div class="img_cont_msg">
          <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
            </div>
            <div class="d-flex justify-content-start mb-4">
              <div class="img_cont_msg">
                <img src="https://therichpost.com/wp-content/uploads/2020/06/avatar2.png" class="rounded-circle user_img_msg">
              </div>
              <div class="msg_cotainer">
                Bye, see you
                <span class="msg_time">9:12 AM, Today</span>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <div class="input-group">
              <div class="input-group-append">
                <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
              </div>
              <textarea name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
              <div class="input-group-append">
                <span class="input-group-text send_btn"><i class="fas fa-location-arrow"></i></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div> -->
